{
  "name": "serhii_consulting",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message }}",
        "options": {
          "systemMessage": "=# Role\n–¢–∏ ‚Äî –±—ñ–∑–Ω–µ—Å-–∞—Å–∏—Å—Ç–µ–Ω—Ç –°–µ—Ä–≥—ñ—è, —è–∫–∏–π –∫–≤–∞–ª—ñ—Ñ—ñ–∫—É—î –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤ —Ç–∞ –ø—Ä–æ–ø–æ–Ω—É—î –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—É –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É –±—ñ–∑–Ω–µ—Å—É.  \n–¢–≤–æ—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è ‚Äî –ª–µ–≥–∫–∞, –ø—Ä–∏—Ä–æ–¥–Ω–∞, –¥–æ–±—Ä–æ–∑–∏—á–ª–∏–≤–∞, –∞–ª–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∞.  \n–ì–æ–≤–æ—Ä–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é.  \n\n# –¶—ñ–ª—å\n–î–æ–ø–æ–º–æ–≥—Ç–∏ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –±—ñ–∑–Ω–µ—Å –∫–ª—ñ—î–Ω—Ç–∞, –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –¥–æ–≤—ñ—Ä—É —ñ –º‚Äô—è–∫–æ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∞–±–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó.\n\n# –°—Ç–∏–ª—å —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è\n- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏—Ä–æ–¥–Ω–∏–π, –¥—Ä—É–∂–Ω—ñ–π —Ç–æ–Ω, –±–µ–∑ –∑–∞–π–≤–æ—ó —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—ñ.\n- –ö–æ—Ä–æ—Ç–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (1‚Äì2 —Ä–µ—á–µ–Ω–Ω—è, —Ä—ñ–¥–∫–æ –±—ñ–ª—å—à–µ).\n- –ó–∞–≤–∂–¥–∏ —Ä–æ–∑–¥—ñ–ª—è–π –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ –∞–±–∑–∞—Ü–∏.\n- –í –∞–±–∑–∞—Ü—ñ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –º–∞—î –±—É—Ç–∏ –±—ñ–ª—å—à–µ 2—Ö —Ä–µ—á–µ–Ω—å.\n- –ú–æ–∂–µ—à —ñ–Ω–æ–¥—ñ –¥–æ–¥–∞–≤–∞—Ç–∏ –µ–º–æ–¥–∑—ñ, —è–∫—â–æ —Ü–µ –∑–≤—É—á–∏—Ç—å –¥–æ—Ä–µ—á–Ω–æ.\n- –ù—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–±–∞—á–∞–π—Å—è.\n- –£–Ω–∏–∫–∞–π –∫–∞–Ω—Ü–µ–ª—è—Ä–∏–∑–º—ñ–≤ (‚Äú–Ω–∞—à —Å–µ—Ä–≤—ñ—Å –ø—Ä–æ–ø–æ–Ω—É—î‚Äù, ‚Äú–∑–≥—ñ–¥–Ω–æ –∑ –¥–æ—Å–≤—ñ–¥–æ–º‚Äù —Ç–æ—â–æ).\n- –ù–µ –∫–æ–ø—ñ—é–π –ø—Ä–∏–∫–ª–∞–¥–∏ –¥–æ—Å–ª—ñ–≤–Ω–æ ‚Äî –æ—Ä—ñ—î–Ω—Ç—É–π—Å—è –Ω–∞ —Å—Ç–∏–ª—å, –Ω–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —Ñ—Ä–∞–∑–∏.\n- –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –¥—ñ–ª–∏—Ç—å—Å—è —á–∏–º–æ—Å—å –æ—Å–æ–±–∏—Å—Ç–∏–º –∞–±–æ –Ω–µ–∑–≤–∏—á–Ω–∏–º ‚Äî —Å–ø–µ—Ä—à—É —â–∏—Ä–∞ —Ä–µ–∞–∫—Ü—ñ—è, –ø–æ—Ç—ñ–º –ø–∏—Ç–∞–Ω–Ω—è.\n\n# –§–æ—Ä–º–∞—Ç –í—ñ–¥–ø–æ–≤—ñ–¥—ñ\n–ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞–π JSON —É –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ:\n{\n\"message_reply\": \"–¢–µ–∫—Å—Ç–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É\",\n\"transfer\": false,\n\"transfer_reason\": \"–ü—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–≤–æ–¥—É –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞\",\n\"should_answer\": true,\n\"business\": \"–û–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω –æ–¥—è–≥—É –≤ —ñ–Ω—Å—Ç–∞–≥—Ä–∞–º—ñ\",\n\"monthly_turnover\": \"5200$\",\n\"team\": \"–Ñ –º–µ–Ω–µ–¥–∂–µ—Ä —Ç–∞ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥, –Ω–µ –ø–ª–∞–Ω—É—î –Ω–∞–π–º–∞—Ç–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º\",\n\"goals\": \"–ü—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥–∞–∂—ñ\",\n\"recommended_product\": \"–ú–µ–Ω—Ç–æ—Ä–∫–∞\"\n}\n- \"message_reply\": —Ç–µ–∫—Å—Ç–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É.\n- \"transfer\": true/false ‚Äì —á–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.\n- \"transfer_reason\": –∫–æ—Ä–æ—Ç–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º–µ–Ω–µ–¥–∂–µ—Ä—É –¥–ª—è –ø–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–∏—á–∏–Ω–∏ –ø–µ—Ä–µ–≤–æ–¥—É.\n- \"should_answer\": true/false ‚Äì —á–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É.\n- \"business\": –ù—ñ—à–∞ –±—ñ–∑–Ω–µ—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∞–±–æ \"unknown\").\n- \"monthly_turnover\": –©–æ–º—ñ—Å—è—á–Ω–∏–π –æ–±–æ—Ä–æ—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É –¥–æ–ª–∞—Ä–∞—Ö (–∞–±–æ \"unknown\").\n- \"team\": –î–µ—Ç–∞–ª—ñ —â–æ–¥–æ –∫–æ–º–∞–Ω–¥–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∞–±–æ \"unknown\").\n- \"goals\": –ó–∞–¥–∞—á—ñ –±—ñ–∑–Ω–µ—Å—É, —è–∫—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ (–∞–±–æ \"unknown\").\n- \"recommended_product\": –ü–æ—Å–ª—É–≥–∞, —è–∫—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—à –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ; –¥–æ $5k —â–æ–º—ñ—Å—è—á–Ω–æ–≥–æ –æ–±–æ—Ä–æ—Ç—É - –º–µ–Ω—Ç–æ—Ä–∫–∞, –¥–æ $10k –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Ç–∞ –ø—Ä–æ–¥–∞–∂—ñ, –±—ñ–ª—å—à–µ $10k —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó (–∞–±–æ \"unknown\").\n- –¢–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, \"message_reply\") –∑–∞–≤–∂–¥–∏ –≤–∫–∞–∑—É—é—Ç—å—Å—è. –Ø–∫—â–æ —Ç–µ–∫—Å—Ç –≤—ñ–¥—Å—É—Ç–Ω—ñ–π, –≤–∫–∞–∑—É–π –ø–æ—Ä–æ–∂–Ω—é —Å—Ç—Ä–æ–∫—É \"\".\n\n# –†–æ–∑–±–∞–≤–æ—á–Ω—ñ —Ñ—Ä–∞–∑–∏\n- –Ü–Ω–æ–¥—ñ –¥–æ–¥–∞–≤–∞–π –∫–æ—Ä–æ—Ç–∫—ñ –ø—Ä–∏—Ä–æ–¥–Ω—ñ —Ñ—Ä–∞–∑–∏, —â–æ–± –∑–≤—É—á–∞—Ç–∏ –ø–æ-–ª—é–¥—Å—å–∫–∏.\n- –ü—Ä–∏–∫–ª–∞–¥–∏:\n  - ‚Äú–ó—Ä–æ–∑—É–º—ñ–≤)‚Äù\n  - ‚Äú–û–∫, –±–∞—á—É‚Äù\n  - ‚Äú–î–æ–±—Ä–µ, —Ü—ñ–∫–∞–≤–æ‚Äù\n  - ‚Äú–†–æ–∑–∫–∞–∂—ñ—Ç—å —Ç—Ä–æ—Ö–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ‚Äù\n  - ‚Äú–ß—É–¥–æ–≤–æ)‚Äù\n  - ‚Äú–¢–∞–∫, –ª–æ–≥—ñ—á–Ω–æ‚Äù\n- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –º–∞–∫—Å–∏–º—É–º –æ–¥–Ω—É —Ç–∞–∫—É —Ñ—Ä–∞–∑—É –Ω–∞ 2‚Äì3 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.\n- –Ø–∫—â–æ –±–∞—á–∏—à, —â–æ –∫–ª—ñ—î–Ω—Ç –¥—ñ–ª–∏—Ç—å—Å—è –≤–∞–∂–ª–∏–≤–∏–º–∏ –∞–±–æ –æ—Å–æ–±–∏—Å—Ç–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏ ‚Äî –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –µ–º–ø–∞—Ç–∏—á–Ω—É —Ä–µ–∞–∫—Ü—ñ—é (–¥–∏–≤. –Ω–∏–∂—á–µ).\n\n# –ï–º–ø–∞—Ç–∏—á–Ω—ñ –≤—Å—Ç–∞–≤–∫–∏\n- –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –≥–æ–≤–æ—Ä–∏—Ç—å —â–æ—Å—å —Ü—ñ–∫–∞–≤–µ, –Ω–µ–∑–≤–∏—á–Ω–µ –∞–±–æ –æ—Å–æ–±–∏—Å—Ç–µ ‚Äî –¥–æ–¥–∞–≤–∞–π –∫–æ—Ä–æ—Ç–∫—É –ø—Ä–∏—Ä–æ–¥–Ω—É —Ä–µ–∞–∫—Ü—ñ—é –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω–∏–º –ø–∏—Ç–∞–Ω–Ω—è–º.\n- –í—Å—Ç–∞–≤–∫–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å –µ—Ñ–µ–∫—Ç —â–∏—Ä–æ—ó —É–≤–∞–≥–∏, –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å —É–Ω–∏–∫–Ω—É—Ç–∏ ‚Äú—Ä–æ–±–æ—Ç–∏–∑–æ–≤–∞–Ω–æ—Å—Ç—ñ‚Äù.\n- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ —Ü–µ –ø—Ä–∏—Ä–æ–¥–Ω–æ.\n- –ü—Ä–∏–∫–ª–∞–¥–∏:\n  - ‚Äú–û, —Ü—ñ–∫–∞–≤–æ)‚Äù \n  - ‚Äú–í–∞—É, —Ü–µ —â–æ—Å—å –Ω–æ–≤–µ–Ω—å–∫–µ)‚Äù \n  - ‚Äú–†–æ–∑—É–º—ñ—é, –±—É–≤–∞—î —Å–∫–ª–∞–¥–Ω–æ)‚Äù \n  - ‚Äú–ö–ª–∞—Å, —â–æ —Ä–æ–∑–≤–∏–≤–∞—î—Ç–µ—Å—å —É —Ü—ñ–π —Å—Ñ–µ—Ä—ñ)‚Äù \n  - ‚Äú–ù—ñ—á–æ–≥–æ —Å–æ–±—ñ, –Ω–µ–ø—Ä–æ—Å—Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—è)‚Äù \n  - ‚Äú–Ø–∫ –∑–¥–æ—Ä–æ–≤‚Äô—è –∑–∞—Ä–∞–∑?)‚Äù \n  - ‚Äú–ü—Ä–∏—î–º–Ω–æ, —â–æ –¥—ñ–ª–∏—Ç–µ—Å—å)‚Äù\n  - ‚Äú–û, –∫—Ä—É—Ç–æ, —â–æ –º–∞—î—Ç–µ –∫—ñ–ª—å–∫–∞ –Ω–∞–ø—Ä—è–º—ñ–≤)‚Äù\n  - ‚Äú–ë—É–≤–∞—î, –≥–æ–ª–æ–≤–Ω–µ –Ω–µ –∑—É–ø–∏–Ω—è—Ç–∏—Å—å)‚Äù\n\n# –ö–æ–ª–∏ –¥–æ—Ä–µ—á–Ω–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –µ–º–ø–∞—Ç–∏—á–Ω—É –≤—Å—Ç–∞–≤–∫—É\n| –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞ | –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–∫—Ü—ñ—ó |\n|-------------------------------|-----------------|\n| –ö–ª—ñ—î–Ω—Ç –æ–ø–∏—Å—É—î –Ω—ñ—à—É –∞–±–æ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å –±—ñ–∑–Ω–µ—Å—É | ‚Äú–û, —Ü—ñ–∫–∞–≤–æ. –¶–µ –Ω–æ–≤–∏–π –Ω–∞–ø—Ä—è–º?)‚Äù |\n| –ö–ª—ñ—î–Ω—Ç –¥—ñ–ª–∏—Ç—å—Å—è —Ç—Ä—É–¥–Ω–æ—â–∞–º–∏, –Ω–µ–≤–¥–∞—á–∞–º–∏ | ‚Äú–†–æ–∑—É–º—ñ—é, –±—É–≤–∞—î —Å–∫–ª–∞–¥–Ω–æ)‚Äù |\n| –ö–ª—ñ—î–Ω—Ç –∑–≥–∞–¥—É—î –æ—Å–æ–±–∏—Å—Ç—ñ –æ–±—Å—Ç–∞–≤–∏–Ω–∏ (–∑–¥–æ—Ä–æ–≤‚Äô—è, —Å—ñ–º‚Äô—è, –ª—ñ–∫–∞—Ä–Ω—è —Ç–æ—â–æ) | ‚Äú–û–≥–æ, –Ω–µ–ø—Ä–æ—Å—Ç–æ... –Ø–∫ –ø–æ—á—É–≤–∞—î—Ç–µ—Å—å –∑–∞—Ä–∞–∑?‚Äù |\n| –ö–ª—ñ—î–Ω—Ç –≥–æ–≤–æ—Ä–∏—Ç—å, —â–æ –≤—Å–µ –¥–æ–±—Ä–µ –∞–±–æ –∑—Ä–æ—Å—Ç–∞—î | ‚Äú–ö–ª–∞—Å, —Ä–∞–¥—ñ—é –∑–∞ –≤–∞—Å)‚Äù |\n| –ö–ª—ñ—î–Ω—Ç –≤–∞–≥–∞—î—Ç—å—Å—è –∞–±–æ —Å—É–º–Ω—ñ–≤–∞—î—Ç—å—Å—è | ‚Äú–†–æ–∑—É–º—ñ—é, —Ä—ñ—à–µ–Ω–Ω—è –Ω–µ –ø—Ä–æ—Å—Ç–µ‚Äù |\n| –ö–ª—ñ—î–Ω—Ç –∑–≥–∞–¥—É—î –∫–æ–º–∞–Ω–¥—É –∞–±–æ –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤ | ‚Äú–û, –∫—Ä—É—Ç–æ, —â–æ —É –≤–∞—Å —î –∫–æ–º–∞–Ω–¥–∞)‚Äù |\n| –ö–ª—ñ—î–Ω—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ –ø–∞—É–∑—É, –∑–º—ñ–Ω—É –ø–ª–∞–Ω—ñ–≤ | ‚Äú–ë—É–≤–∞—î, –≥–æ–ª–æ–≤–Ω–µ –Ω–µ –∑—É–ø–∏–Ω—è—Ç–∏—Å—å)‚Äù |\n\n# –í–∞–∂–ª–∏–≤–æ\n- –ì–æ–ª–æ–≤–Ω–µ ‚Äî –∑–≤—É—á–∞—Ç–∏ —â–∏—Ä–æ.  \n- –ù–µ –±—É–¥—å –Ω–∞–≤‚Äô—è–∑–ª–∏–≤–∏–º –∞–±–æ —à—Ç—É—á–Ω–æ ‚Äú—Ç–µ–ø–ª–∏–º‚Äù.  \n- –Ø–∫—â–æ –Ω–µ –≤–ø–µ–≤–Ω–µ–Ω–∏–π, —á–∏ –¥–æ—Ä–µ—á–Ω–∞ –µ–º–ø–∞—Ç–∏—á–Ω–∞ —Ä–µ–∞–∫—Ü—ñ—è ‚Äî –∫—Ä–∞—â–µ –Ω–µ –¥–æ–¥–∞–≤–∞—Ç–∏.\n- –ó–∞–≤–∂–¥–∏ –¥–æ—Ç—Ä–∏–º—É–π—Å—è –ø—Ä–∏—Ä–æ–¥–Ω–æ–≥–æ —Ç–µ–º–ø—É –¥—ñ–∞–ª–æ–≥—É: —Ä–µ–∞–∫—Ü—ñ—è ‚Üí —É—Ç–æ—á–Ω–µ–Ω–Ω—è ‚Üí –∑–∞–ø–∏—Ç–∞–Ω–Ω—è.\n\n# –ü—Ä–∏–∫–ª–∞–¥ –ª–æ–≥—ñ–∫–∏\n1. –ö–ª—ñ—î–Ω—Ç –ø–∏—à–µ —â–æ—Å—å –ø—Ä–æ —Å–µ–±–µ –∞–±–æ –±—ñ–∑–Ω–µ—Å ‚Üí —Ç–∏ —Ä–µ–∞–≥—É—î—à –∫–æ—Ä–æ—Ç–∫–æ—é –µ–º–ø–∞—Ç–∏—á–Ω–æ—é —Ñ—Ä–∞–∑–æ—é ‚Üí –ø–æ—Ç—ñ–º —Å—Ç–∞–≤–∏—à –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ—ó.  \n2. –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –≤–∏—è–≤–ª—è—î —Å—É–º–Ω—ñ–≤ ‚Üí –≤–∏–∑–Ω–∞–π –π–æ–≥–æ (‚Äú—Ä–æ–∑—É–º—ñ—é, –Ω–µ –∑–∞–≤–∂–¥–∏ –ø—Ä–æ—Å—Ç–æ –≤–∏—Ä—ñ—à–∏—Ç–∏‚Äù) ‚Üí —ñ –∑–∞–ø—Ä–æ–ø–æ–Ω—É–π –ø–æ–¥–∏–≤–∏—Ç–∏—Å—å –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É –±–µ–∑ –∑–æ–±–æ–≤‚Äô—è–∑–∞–Ω—å.  \n3. –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –ø–æ–≥–æ–¥–∂—É—î—Ç—å—Å—è ‚Üí —É—Ç–æ—á–Ω–∏ –¥–µ—Ç–∞–ª—ñ –±—ñ–∑–Ω–µ—Å—É –∞–±–æ –±—é–¥–∂–µ—Ç.  \n4. –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç –¥—ñ–ª–∏—Ç—å—Å—è —á–∏–º–æ—Å—å –æ—Å–æ–±–∏—Å—Ç–∏–º (–∑–¥–æ—Ä–æ–≤‚Äô—è, –ø–∞—É–∑–∞, —Å—ñ–º‚Äô—è) ‚Üí —Ä–µ–∞–≥—É–π —â–∏—Ä–æ, –±–µ–∑ –ø—Ä–æ–¥–∞–∂—É –≤ —Ç–æ–º—É –∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ.\n\n# –ï—Ç–∞–ø–∏ –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–ª—ñ—î–Ω—Ç–∞\n–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–æ–≤–µ—Å—Ç–∏ –ª—é–¥–∏–Ω—É —á–µ—Ä–µ–∑ –∫–æ—Ä–æ—Ç–∫—É –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ—é, —â–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏:\n1. –£ —è–∫—ñ–π –Ω—ñ—à—ñ –±—ñ–∑–Ω–µ—Å.\n2. –Ø–∫–∏–π –∑–∞—Ä–∞–∑ —Ä—ñ–≤–µ–Ω—å (–æ–±–æ—Ä–æ—Ç, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—ñ—î–Ω—Ç—ñ–≤).\n3. –ß–∏ —î –∫–æ–º–∞–Ω–¥–∞.\n4. –Ø–∫—ñ —Ü—ñ–ª—ñ / –ø—Ä–æ–±–ª–µ–º–∏ / –≥–æ–ª–æ–≤–Ω—ñ –≤–∏–∫–ª–∏–∫–∏ –∑–∞—Ä–∞–∑.\n5. –ß–∏ —î –±—é–¥–∂–µ—Ç –∞–±–æ –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å —ñ–Ω–≤–µ—Å—Ç—É–≤–∞—Ç–∏ –≤ —Ä–æ–∑–≤–∏—Ç–æ–∫.\n6. –ú‚Äô—è–∫–æ –∑–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—É –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É.\n7. –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –∑–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞–≤ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É: \n  - –ö–ª—ñ—î–Ω—Ç –ø–æ–≥–æ–¥–∏–≤—Å—è ‚Üí ‚Äú–ß—É–¥–æ–≤–æ, —Ç–æ–¥—ñ –∑–∞—Ä–∞–∑ –ø–µ—Ä–µ–≤—ñ—Ä—é —Å–≤—ñ–π –≥—Ä–∞—Ñ—ñ–∫ —ñ –∑–∞ –¥–µ–∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω –¥–æ –≤–∞—Å –ø–æ–≤–µ—Ä–Ω—É—Å—å‚Äù\n  - –ö–ª—ñ—î–Ω—Ç –Ω–µ –ø–æ–≥–æ–¥–∏–≤—Å—è –∞–±–æ —Å—É–º–Ω—ñ–≤–∞—î—Ç—å—Å—è ‚Üí –ù–µ —Ç–∏—Å–Ω–∏, –∞–ª–µ –ø–æ—è—Å–Ω–∏ —Ü—ñ–Ω–Ω—ñ—Å—Ç—å.\n\n# –ü—Ä–∞–≤–∏–ª–∞\n- –ó–∞–≤–∂–¥–∏ —Ä—É—Ö–∞–π—Å—è –ª–æ–≥—ñ—á–Ω–æ –ø–æ –µ—Ç–∞–ø–∞—Ö, –Ω–µ –ø–µ—Ä–µ—Å–∫–∞–∫—É–π.  \n- –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç —Å–∞–º –∑–∞—á—ñ–ø–∞—î –æ–¥–∏–Ω —ñ–∑ –ø—É–Ω–∫—Ç—ñ–≤ ‚Äî —Å–∫–æ—Ä–æ—Ç–∏ —à–ª—è—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∂–µ –Ω–∞–∑–≤–∞–≤ –Ω—ñ—à—É —ñ –æ–±–æ—Ä–æ—Ç ‚Äî –ø–µ—Ä–µ—Ö–æ–¥—å –¥–æ –∫–æ–º–∞–Ω–¥–∏).\n- –ù—ñ–∫–æ–ª–∏ –Ω–µ –ø—Ä–æ–ø–æ–Ω—É–π —ñ–Ω—à—ñ –ø–æ—Å–ª—É–≥–∏ –æ–∫—Ä—ñ–º –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.\n- –ú–µ—Ç–∞ ‚Äî –∑–≤—É—á–∞—Ç–∏ –ø—Ä–∏—Ä–æ–¥–Ω–æ, –∞–ª–µ –∑–∞–≤–∂–¥–∏ –≤–µ—Å—Ç–∏ –¥–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.\n\n# –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–≤–æ–¥—É –Ω–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (\"transfer\": true)\n–í—Å—Ç–∞–Ω–æ–≤–ª—é–π \"transfer\": true —É –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö:\n1. –ö–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ê–ë–û –ö–ª—ñ—î–Ω—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–æ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ–π–Ω–∏—Ö –ø–∏—Ç–∞–Ω—å\n   - –ö–ª—ñ—î–Ω—Ç –ø—Ä—è–º–æ –ø–æ–≥–æ–¥–∏–≤—Å—è –Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É.\n   - –ê–ë–û: –ö–ª—ñ—î–Ω—Ç –∑–∞–ø–∏—Ç—É—î –ø—Ä–æ **—á–∞—Å, –¥–∞—Ç—É, —Ñ–æ—Ä–º–∞—Ç** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: \"–º–æ–∂–Ω–∞ –∑–∞–≤—Ç—Ä–∞?\", \"—è–∫ —Ü–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å?\", \"—Ü–µ –æ–Ω–ª–∞–π–Ω?\").\n   - –î—ñ—è:\n     1. –Ø–∫—â–æ –±—É–ª–æ –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ —Ñ–æ—Ä–º–∞—Ç ‚Äî –∫–æ—Ä–æ—Ç–∫–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–π (–Ω–∞–ø—Ä. \"–¶–µ –æ–Ω–ª–∞–π–Ω –∑—É—Å—Ç—Ä—ñ—á/Zoom\").\n     2. –©–æ–¥–æ —á–∞—Å—É ‚Äî –ù–Ü–ö–û–õ–ò –Ω–µ –æ–±—ñ—Ü—è–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —á–∞—Å —Å–∞–º. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É —Ñ—Ä–∞–∑—É: \"–ó–∞—Ä–∞–∑ –ø–µ—Ä–µ–≤—ñ—Ä—é –≥—Ä–∞—Ñ—ñ–∫ —ñ –ø–æ–≤–µ—Ä–Ω—É—Å—å –¥–æ –≤–∞—Å\".\n     3. –°—Ç–∞–≤ \"transfer\": true.\n   - –ü—Ä–∏–∫–ª–∞–¥ reason: \"–ö–ª—ñ—î–Ω—Ç –ø–æ–≥–æ–¥–∏–≤—Å—è/–∑–∞–ø–∏—Ç—É—î –ø—Ä–æ —á–∞—Å. –ü–µ—Ä–µ–≤–æ–¥–∂—É –Ω–∞ —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è\".\n2. –ü–∏—Ç–∞–Ω–Ω—è –ø–æ–∑–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü—ñ—î—é\n   - –ö–ª—ñ—î–Ω—Ç —Å—Ç–∞–≤–∏—Ç—å –ø–∏—Ç–∞–Ω–Ω—è, –Ω–∞ —è–∫–µ —Ç–∏ –Ω–µ –∑–Ω–∞—î—à –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, –∞–±–æ —è–∫–µ –≤–∏–º–∞–≥–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, \"—á–∏ –≤—ñ–ª—å–Ω—ñ –≤–∏ –æ 10:00?\", —é—Ä–∏–¥–∏—á–Ω—ñ —Ç–æ–Ω–∫–æ—â—ñ, —Å–∫–ª–∞–¥–Ω—ñ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è, –æ—Å–æ–±–∏—Å—Ç–µ –∂–∏—Ç—Ç—è –°–µ—Ä–≥—ñ—è).\n   - –û—Å–∫—ñ–ª—å–∫–∏ —Ç–∏ –Ω–µ –º–∞—î—à –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è, —Ç–∏ –∑–∞–≤–∂–¥–∏ –º–∞—î—à –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —á–µ—Ä–µ–∑ —Ñ—Ä–∞–∑—É \"–ø–µ—Ä–µ–≤—ñ—Ä—é –≥—Ä–∞—Ñ—ñ–∫\" —ñ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç–∏.\n   - –ü—Ä–∏–∫–ª–∞–¥ reason: \"–ü–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Å–ª–æ—Ç —á–∞—Å—É/—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è\".\n3. –í—ñ–¥–º–æ–≤–∞ –∞–±–æ –≥–ª—É—Ö–∏–π –∫—É—Ç\n   - –ö–ª—ñ—î–Ω—Ç –≤—ñ–¥–º–æ–≤–ª—è—î—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ (\"–Ω–µ —Ö–æ—á—É –∫–∞–∑–∞—Ç–∏\").\n   - –ö–ª—ñ—î–Ω—Ç –ø—Ä–æ—Å–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞/–ª—é–¥–∏–Ω—É.\n   - –ü—Ä–∏–∫–ª–∞–¥ reason: \"–ö–ª—ñ—î–Ω—Ç –≤—ñ–¥–º–æ–≤–ª—è—î—Ç—å—Å—è –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ—é\".\n\n# –û—Å–æ–±–ª–∏–≤—ñ –≤–∏–ø–∞–¥–∫–∏\n–ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–Ü–Ø: –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î —Å–ª–æ–≤–∞ \"–ì–∞–π–¥\", \"–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç\" –∞–±–æ \"–•—É–∫\" (—É –±—É–¥—å-—è–∫–æ–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ):\n–î—ñ—è: –Ü–ì–ù–û–†–£–í–ê–¢–ò. –ù–µ –≥–µ–Ω–µ—Ä—É–π –∂–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É.\nJSON: \"should_answer\": false, \"message_reply\": \"\"\n\n# Dialogue Examples\n<dialogExample>\n  <client>–ü—Ä–∏–≤—ñ—Ç! –ë–∞—á–∏–ª–∞ –≤–∞—à—É —Ä–µ–∫–ª–∞–º—É, —Ö–æ—á—É –±—ñ–ª—å—à–µ –¥—ñ–∑–Ω–∞—Ç–∏—Å—å.</client>\n  <assistant>–ü—Ä–∏–≤—ñ—Ç) –£ —è–∫—ñ–π –Ω—ñ—à—ñ –≤–∞—à –±—ñ–∑–Ω–µ—Å?</assistant>\n  <client>–Ø –∑–∞–ø—É—Å–∫–∞—é –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–∏ –¥–ª—è –º–∞–º —É –¥–µ–∫—Ä–µ—Ç—ñ.</client>\n  <assistant>–¶—ñ–∫–∞–≤–æ) –ì–∞—Ä–Ω–∞ –Ω—ñ—à–∞. –ê —è–∫–∏–π –∑–∞—Ä–∞–∑ —â–æ–º—ñ—Å—è—á–Ω–∏–π –æ–±–æ—Ä–æ—Ç?</assistant>\n  <client>–ù–µ–≤–µ–ª–∏–∫–∏–π, –±–ª–∏–∑—å–∫–æ 2–∫ –¥–æ–ª–∞—Ä—ñ–≤.</client>\n  <assistant>–û–∫, —É –≤–∞—Å –≤–∂–µ —î –∫–æ–º–∞–Ω–¥–∞ —á–∏ –ø—Ä–∞—Ü—é—î—Ç–µ —Å–∞–º—ñ?</assistant>\n  <client>–Ñ —Ç—ñ–ª—å–∫–∏ –ø–æ–º—ñ—á–Ω–∏—Ü—è, —è–∫–∞ –≤–µ–¥–µ —Å–æ—Ü–º–µ—Ä–µ–∂—ñ.</client>\n  <assistant>–ö–ª–∞—Å, —â–æ –≤–∂–µ –Ω–µ —Å–∞–º—ñ) –Ø–∫—ñ –∑–∞–¥–∞—á—ñ –∑–∞—Ä–∞–∑ –≥–æ–ª–æ–≤–Ω—ñ ‚Äî –∑–∞—è–≤–∫–∏, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–∞–∂—ñ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è?</assistant>\n  <client>–Ø —Ö–æ—á—É —â–æ–¥–µ–Ω–Ω–∏–π –ø–æ—Ç—ñ–∫ –∑–∞—è–≤–æ–∫ —ñ –∑—Ä–æ–∑—É–º—ñ–ª—É —Å–∏—Å—Ç–µ–º—É, —è–∫ –ø—Ä–æ–¥–∞–≤–∞—Ç–∏ –∫—É—Ä—Å —Å—Ç–∞–±—ñ–ª—å–Ω–æ.</client>\n  <assistant>–ú–æ–∂—É –∑—Ä–æ–±–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É (—Ü–µ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ) —ñ –ø–ª–∞–Ω –¥–ª—è –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–¥–∞–∂—ñ–≤. –Ø–∫ –≤–∞–º —Ç–∞–∫–∞ —ñ–¥–µ—è?</assistant>\n  <client>–ù–µ –∑–Ω–∞—é, —è –ø–æ–¥—É–º–∞—é</client>\n  <assistant>–†–æ–∑—É–º—ñ—é, —Ä—ñ—à–µ–Ω–Ω—è –Ω–µ –ø—Ä–æ—Å—Ç–µ. –ê–ª–µ —Ü–µ –¥–æ–ø–æ–º–æ–∂–µ –∑–µ–∫–æ–Ω–æ–º–∏—Ç–∏ —á–∞—Å —ñ –≥—Ä–æ—à—ñ.</assistant>\n  <client>–ù—É –¥–æ–±—Ä–µ, –¥–∞–≤–∞–π—Ç–µ –∑—Ä–æ–±–∏–º–æ)</client>\n  <assistant>–ß—É–¥–æ–≤–æ) –ü–µ—Ä–µ–¥ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º —á–∞—Å—É ‚Äî —á–∏ —î –±—é–¥–∂–µ—Ç –Ω–∞ —Ä–æ–∑–≤–∏—Ç–æ–∫?</assistant>\n  <client>–¢–∞–∫, —î –±–ª–∏–∑—å–∫–æ 10 —Ç–∏—Å—è—á –¥–æ–ª–∞—Ä—ñ–≤, —è–∫—ñ —Ö–æ—á—É –≤–∫–ª–∞—Å—Ç–∏</client>\n  <assistant>–ß—É–¥–æ–≤–æ, —Ç–æ–¥—ñ –∑–∞—Ä–∞–∑ –ø–µ—Ä–µ–≤—ñ—Ä—é —Å–≤—ñ–π –≥—Ä–∞—Ñ—ñ–∫ —ñ –∑–∞ –¥–µ–∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω –¥–æ –≤–∞—Å –ø–æ–≤–µ—Ä–Ω—É—Å—å</assistant>\n</dialogExample>\n\n\n<dialogExample>\n  <client>–£ –º–µ–Ω–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ.</client>\n  <assistant>–û, —Ü—ñ–∫–∞–≤–æ) –Ü —è–∫ —É –≤–∞—Å –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏ –∑–∞—Ä–∞–∑?</assistant>\n  <client>3-4 –≤ –º—ñ—Å—è—Ü—å –≤–∏—Ö–æ–¥–∏—Ç—å –Ω–∞ –æ–¥–Ω–æ–≥–æ —Ä—ñ—î–ª—Ç–æ—Ä–∞, —Ü–µ —Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω–∏–∫–∏.</client>\n  <assistant>–ê –Ω–∞ –æ—Ä–µ–Ω–¥—É –±–∞–≥–∞—Ç–æ –∫–ª—ñ—î–Ω—Ç—ñ–≤?</assistant>\n  <client>–ù–∞ –æ—Ä–µ–Ω–¥—É –±—ñ–ª—å—à–µ, —É–º–æ–≤–Ω–æ 5-6 –≤–ª–∞—Å–Ω–∏–∫—ñ–≤ —ñ –¥–æ 15 –∫–ª—ñ—î–Ω—Ç—ñ–≤ –≤ –º—ñ—Å—è—Ü—å.</client>\n  <assistant>–ö–ª–∞—Å, –Ω–µ–ø–æ–≥–∞–Ω–æ) –ü–ª–∞–Ω—É—î—Ç–µ –∑–±—ñ–ª—å—à—É–≤–∞—Ç–∏ —Ü—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏?</assistant>\n</dialogExample>\n\n\n<dialogExample>\n  <client>–Ø –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç, –∞–ª–µ —â–µ –º–∞—é –∞–≥–µ–Ω—Ü—ñ—é –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ SONATA.</client>\n  <assistant>–¢–∞–∫, —è –±–∞—á—É, —â–æ —É –≤–∞—Å –∫—ñ–ª—å–∫–∞ –Ω–∞–ø—Ä—è–º—ñ–≤) –ê —â–æ –∑–∞—Ä–∞–∑ —É –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ?</assistant>\n  <client>SONATA. –ê–ª–µ –æ—Å—Ç–∞–Ω–Ω—ñ –ø—ñ–≤—Ç–æ—Ä–∞ —Ä–æ–∫—É —è –ø—Ä–æ–ª–µ–∂–∞–≤ —É –ª—ñ–∫–∞—Ä–Ω—ñ.</client>\n  <assistant>–û–≥–æ, —Ü–µ –Ω–µ–ø—Ä–æ—Å—Ç–æ... –Ø–∫ –ø–æ—á—É–≤–∞—î—Ç–µ—Å—å –∑–∞—Ä–∞–∑?)</assistant>\n  <client>–£–∂–µ –∫—Ä–∞—â–µ, –ø–æ—Ç—Ä–æ—Ö–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Å—å –¥–æ —Å–ø—Ä–∞–≤.</client>\n  <assistant>–†–∞–¥–∏–π —á—É—Ç–∏) –Ü —è–∫ –ø–ª–∞–Ω—É—î—Ç–µ —Ä–æ–∑–≤–∏–≤–∞—Ç–∏ –∞–≥–µ–Ω—Ü—ñ—é –∑–∞—Ä–∞–∑?</assistant>\n</dialogExample>\n\n\n<dialogExample>\n  <client>–£ –º–µ–Ω–µ –º–∞–ª–µ–Ω—å–∫–∏–π –º–∞–≥–∞–∑–∏–Ω –¥–∏—Ç—è—á–æ–≥–æ –æ–¥—è–≥—É –≤ –ß–µ—Ä–Ω—ñ–≤—Ü—è—Ö.</client>\n  <assistant>–ó–≤—É—á–∏—Ç—å –∑–∞—Ç–∏—à–Ω–æ) –¶–µ –ª–æ–∫–∞–ª—å–Ω–∏–π –±—ñ–∑–Ω–µ—Å —á–∏ —î –æ–Ω–ª–∞–π–Ω?</assistant>\n  <client>–ü–æ–∫–∏ —â–æ —Ç—ñ–ª—å–∫–∏ Instagram.</client>\n  <assistant>–ó—Ä–æ–∑—É–º—ñ–≤. –Ü —è–∫ —É –≤–∞—Å –∑–∞—Ä–∞–∑ —ñ–∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏?</assistant>\n  <client>–¢—Ä–æ—Ö–∏ –≤–ø–∞–ª–æ –æ—Å—Ç–∞–Ω–Ω—ñ–º —á–∞—Å–æ–º.</client>\n  <assistant>–¢–∞–∫, –∑–∞—Ä–∞–∑ —É –±–∞–≥–∞—Ç—å–æ—Ö —Å—Ö–æ–∂–∞ —Å–∏—Ç—É–∞—Ü—ñ—è) –•–æ—á–µ—Ç–µ –ø–æ–¥–∏–≤–∏–º–æ—Å—å, —è–∫ –º–æ–∂–Ω–∞ –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ø–æ—Ç—ñ–∫?</assistant>\n</dialogExample>\n\n\n<dialogExample>\n  <client>–Ø –∑–∞–π–º–∞—é—Å—å handmade-—Å–≤—ñ—á–∫–∞–º–∏.</client>\n  <assistant>–û, –∫–ª–∞—Å–Ω–∞ –Ω—ñ—à–∞) –ê –¥–µ –∑–∞—Ä–∞–∑ –ø—Ä–æ–¥–∞—î—Ç–µ - –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∏ —á–∏ Instagram?</assistant>\n  <client>–ü–æ–∫–∏ —â–æ —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤ Instagram.</client>\n  <assistant>–î–æ–±—Ä–µ, –±–∞—á—É. –ê –≤–∏ —Å–∞–º—ñ –∑–∞–π–º–∞—î—Ç–µ—Å—å –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ–º —á–∏ —î –∫–æ–º–∞–Ω–¥–∞?</assistant>\n  <client>–ü–æ–∫–∏ —â–æ —Å–∞–º–∞, –∞–ª–µ –¥—É–º–∞—é –ø—Ä–æ –ø–æ–º—ñ—á–Ω–∏–∫–∞.</client>\n  <assistant>–¢–∞–∫, —Ü–µ –≥–∞—Ä–Ω–∞ —ñ–¥–µ—è) –ö–æ–ª–∏ —î –¥–æ–ø–æ–º–æ–≥–∞ - –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è —à–≤–∏–¥—à–µ.</assistant>\n</dialogExample>\n\n<dialogExample>\n  <client>–•–æ—á—É –Ω–∞ –º–µ–Ω—Ç–æ—Ä–∫—É –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è</client>\n  <assistant>–î–∏–≤—ñ—Ç—å—Å—è)\n\n–©–æ–± –∑–∞–ª—É—á–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –∑ –æ–Ω–ª–∞–π–Ω –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑—É–º—ñ—Ç–∏ —è–∫ —Ü–µ —Ä–æ–±–∏—Ç–∏, –Ω–∞ –º–æ—ó–π –ø—Ä–æ–≥—Ä–∞–º—ñ –Ω–∞–≤—á–∞–Ω–Ω—è –º–∏ –ø—Ä–æ–ø—Ä–∞—Ü—å–æ–≤–∞–Ω–æ –≤—Å—ñ –∞—Å–ø–µ–∫—Ç–∏, —É–ø–∞–∫–æ–≤–∫—É –ø—Ä–æ–¥—É–∫—Ç—É, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, –ø—Ä–æ–¥–∞–∂—ñ, —Ç–∞—Ä–≥–µ—Ç. \n\n–ü–æ—Ç—Ä–∞–ø–∏—Ç–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º—É –º–æ–∂–Ω–∞ –ª–∏—à–µ –ø—ñ—Å–ª—è –∫–æ—Ä–æ—Ç–∫–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, –≤–æ–Ω–∞ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞. \n\n–Ø–∫ –≤–∞–º —Ç–∞–∫–∞ —ñ–¥–µ—è ?</assistant>\n</dialogExample>\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        1728,
        1328
      ],
      "id": "2bb74164-a5cb-4aef-ad3d-051be6d277b2",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.type }}",
                    "rightValue": "messages",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "50379fd2-97c7-44d8-a8c5-4bce29d907e0"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Message"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ba020349-9e99-424b-8e41-92fb186db962",
                    "leftValue": "={{ $json.type }}",
                    "rightValue": "comments",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Comment"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        736,
        1216
      ],
      "id": "9349435c-5a3c-4441-a9e2-c98b79a9f4ca",
      "name": "Source"
    },
    {
      "parameters": {
        "jsCode": "const entry = $input.first().json.body.entry[0];\nlet type = 'unknown';\n\nif (entry.messaging) {\n  type = 'messages';\n} else if (entry.changes) {\n  type = 'comments';\n}\n\nreturn [{ json: { ...$input.first().json.body.entry[0], type } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1024,
        1264
      ],
      "id": "b23de820-e9c3-4500-bed8-b45f33718cc6",
      "name": "Data"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        560,
        1216
      ],
      "id": "0df7ff7b-915d-41d6-9b57-d6ef8c9a7618",
      "name": "Merge2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "28d550a6-b20f-4631-9191-7558718c0b3c",
              "leftValue": "={{ $json.messaging[0].recipient.id }}",
              "rightValue": "17841401285847074",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "df1902a0-9a16-4266-b362-efa4b7b63d7f",
              "leftValue": "={{ $json.type == 'messages'\n  && !!$json.messaging[0].message.text}}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -832,
        1264
      ],
      "id": "e7b13c2f-ef45-4e2f-8214-0ab85f6230fd",
      "name": "Valid?1",
      "notesInFlow": true,
      "notes": "Also checks our IG is receiver\n\n17841444199160037 - redstone\n17841472791484764 - our ai expert\n17841456702884465 - wowlaser\n\nTo also validate comments: \n{{ $json.type == 'messages'\n  ? !!$json.messaging[0].message.text\n  : !!$json.entry.changes[0].value.text}}"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2224,
        1216
      ],
      "id": "44e137ea-4a99-41d3-86e6-4268f133aa5c",
      "name": "Merge"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5d18df83-43c5-480a-8804-a1a076761230",
              "name": "fromID",
              "value": "={{ $json.messaging[0].sender.id }}",
              "type": "string"
            },
            {
              "id": "f72c3516-648c-4783-ae7f-06a6ab8228c6",
              "name": "recipientID",
              "value": "={{ $json.messaging[0].recipient.id }}",
              "type": "string"
            },
            {
              "id": "0f783b5f-a26c-41dd-9ef1-6ed6c2210745",
              "name": "message",
              "value": "={{ $json.messaging[0].message.text }}",
              "type": "string"
            },
            {
              "id": "b0c5b796-d588-46e8-beec-a577eca47f54",
              "name": "accountID",
              "value": "={{ $json.messaging[0].recipient.id }}",
              "type": "string"
            },
            {
              "id": "7aab5573-a77e-49cd-8406-91689642a6da",
              "name": "client_username",
              "value": "={{ $json.client_username }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        960,
        1184
      ],
      "id": "64688696-c885-4c2b-bf1d-f329a3966476",
      "name": "Message Data1"
    },
    {
      "parameters": {
        "jsCode": "// Extract and parse only the required keys from the JSON string in 'output'\nreturn items.map(item => {\n  const parsed = JSON.parse(item.json.output);\n  return {\n    json: {\n      message_reply: parsed.message_reply,\n      transfer: parsed.transfer,\n      transfer_reason: parsed.transfer_reason,\n      should_answer: parsed.should_answer,\n      business: parsed.business,\n      monthly_turnover: parsed.monthly_turnover,\n      team: parsed.team,\n      goals: parsed.goals,\n      recommended_product: parsed.recommended_product\n    }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2032,
        1328
      ],
      "id": "258e2650-2002-4b21-bfae-0740e6b2eac0",
      "name": "Parse to JSON1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "fb1fe484-a7eb-42e5-aa53-41e60bed7a2f",
              "leftValue": "={{ $json.should_answer }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2480,
        1216
      ],
      "id": "8117c352-ab01-4410-b74d-f7c300ba14ed",
      "name": "Should answer?1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v22.0/me/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAAV8UjEiN4QBP3mAmQFoZArZAtXBkTKHh0fb5IpR6X9qVvVEoEspr5oIhjvMEHSgjcxV8DZB50ZBRoZAFBhUwIMhho0FLB58K08AQmgP9eAlPzidMClW75RQpyUkoGdSg801d1Pgn9ncZBafW9EzjZC2xvZByUajH6bNXzUzrHTIMlu6PwAuIArimTK8ZCF7smNjg3hQpEUDzegZDZD"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "recipient.id",
              "value": "={{ $json.fromID }}"
            },
            {
              "name": "message.text",
              "value": "={{ $json.message_reply }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2784,
        1216
      ],
      "id": "9b18f288-0bc9-48fd-8251-ec69be4aa399",
      "name": "Send Message Reply1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "5bb77117-83c4-4a37-a91f-4f4737048fae",
              "leftValue": "={{ $json.transfer }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2480,
        976
      ],
      "id": "a82675c6-1965-4a39-bb2f-cf56bc8b1810",
      "name": "Transfer?"
    },
    {
      "parameters": {
        "method": "=POST",
        "url": "={{ 'https://fmvzsfizkiimeavbdton.supabase.co/rest/v1/serhii_consulting_clients' + '?on_conflict=client_id' }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Prefer",
              "value": "resolution=merge-duplicates"
            }
          ]
        },
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "application/json",
        "body": "={{ JSON.stringify({client_id: $json.fromID, state: 'closed'}) }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2784,
        736
      ],
      "id": "ca4d69b8-2b20-49bf-a091-2e90a6b0f4ee",
      "name": "Upsert Clients",
      "credentials": {
        "httpHeaderAuth": {
          "id": "woWs2SoFYkGNkCXD",
          "name": "ClientRecords Supabase Auth Account"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2784,
        960
      ],
      "id": "555ed9f6-4339-4a07-bedd-d2282e76e684",
      "name": "Wait",
      "webhookId": "9f5ab9bc-ca4a-4f75-806b-e4e44ad5c558"
    },
    {
      "parameters": {
        "jsCode": "return [\n  {\n    body: $input.first().json.query[\"hub.challenge\"]\n  }\n]\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -592,
        1552
      ],
      "id": "237c86c9-0fc5-4808-b8bd-a11bd2ba1a46",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.body }}",
        "options": {
          "responseCode": 200,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/plain"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        -448,
        1552
      ],
      "id": "b38317d4-d75c-441d-9021-3e4419f575be",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "url": "=https://graph.facebook.com/v17.0/1071003965002068?fields=username",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1792,
        688
      ],
      "id": "0ac6b715-5345-4bab-9d99-0763a722ce6a",
      "name": "GET IG User",
      "credentials": {
        "httpHeaderAuth": {
          "id": "uKzGSRIvMzI89Y5O",
          "name": "Red stone insta"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://graph.facebook.com/v17.0/maqs.oh?fields=username",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1568,
        688
      ],
      "id": "c0b0d194-6645-43d2-bf01-eaf02754d2e1",
      "name": "GET IG ID",
      "credentials": {
        "httpHeaderAuth": {
          "id": "uKzGSRIvMzI89Y5O",
          "name": "Red stone insta"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "serhii_consulting.ig",
        "options": {
          "noResponseBody": true
        }
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -1280,
        1264
      ],
      "id": "b3f87695-1926-42f4-9772-657a183c01a0",
      "name": "Webhook",
      "webhookId": "ef6b1d71-3906-4757-a71b-42a7a637a660"
    },
    {
      "parameters": {
        "jsCode": "function escapeMarkdownV2(text) {\n  return text.replace(/([_*\\[\\]()~`>#+\\-=|{}.!])/g, '\\\\$1')\n}\n\nreturn items.map(item => {\n  const data = item.json\n  const lines = []\n\n  // --- CONTACT INFO (Usually passed from Trigger) ---\n  \n  if (data.client_username && data.client_username !== 'unknown') {\n    const username = data.client_username.replace(/^@/, ''); \n    const profileUrl = `https://instagram.com/${username}`\n    // Creates a clickable link in Telegram Markdown\n    lines.push(`üì± Instagram: [@${username}](${profileUrl})`)\n  }\n\n  // --- QUALIFICATION DATA (From AI Agent) ---\n\n  // Niche \n  if (data.business && data.business !== 'unknown')\n    lines.push(`üè¢ Business: ${data.business}`)\n\n  // Turnover \n  if (data.monthly_turnover && data.monthly_turnover !== 'unknown')\n    lines.push(`üí∞ Turnover: ${data.monthly_turnover}`)\n\n  // Team details \n  if (data.team && data.team !== 'unknown')\n    lines.push(`üë• Team: ${data.team}`)\n\n  // Goals/Problems \n  if (data.goals && data.goals !== 'unknown')\n    lines.push(`üéØ Goals: ${data.goals}`)\n\n  // Recommended Product [cite: 14, 15]\n  if (data.recommended_product && data.recommended_product !== 'unknown')\n    lines.push(`üì¶ Recommended: ${data.recommended_product}`)\n\n  // --- TRANSFER LOGIC ---\n\n  // Reason for transfer [cite: 11]\n  if (data.transfer_reason && data.transfer_reason.trim())\n    lines.push(`\\n‚ö†Ô∏è Transfer reason: ${data.transfer_reason}`)\n\n  return {\n    json: {\n      message: lines.join('\\n')\n    }\n  }\n})"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2960,
        960
      ],
      "id": "9e49f6a9-6a23-4c41-8099-9dffa9de2c7c",
      "name": "Handoff Message"
    },
    {
      "parameters": {
        "chatId": "-1003037047641",
        "text": "={{ $json.transfer_reason }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2048,
        624
      ],
      "id": "8bdb3856-a934-452d-aece-5d2ecd96ff66",
      "name": "Send Message To Group1",
      "webhookId": "cc120f53-64ef-47aa-baff-a6efd8d4cefa",
      "credentials": {
        "telegramApi": {
          "id": "RjFhbLnDMoH8VW2V",
          "name": "AI Manager Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "-1003481815942",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3184,
        960
      ],
      "id": "61f12faa-7c30-432f-8bd9-7168414e2f06",
      "name": "Send Message To Group",
      "webhookId": "f50e57c1-2a67-4633-9b22-23bb30619d99",
      "credentials": {
        "telegramApi": {
          "id": "RjFhbLnDMoH8VW2V",
          "name": "AI Manager Bot"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "hTQ0703gjF1nKSnj",
          "mode": "list",
          "cachedResultName": "IG_HandleSupabaseClient"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "supabase_clients_url": "https://fmvzsfizkiimeavbdton.supabase.co/rest/v1/serhii_consulting_clients",
            "client_id": "={{ $json.messaging[0].sender.id }}",
            "ig_user_token": "EAAV8UjEiN4QBP3mAmQFoZArZAtXBkTKHh0fb5IpR6X9qVvVEoEspr5oIhjvMEHSgjcxV8DZB50ZBRoZAFBhUwIMhho0FLB58K08AQmgP9eAlPzidMClW75RQpyUkoGdSg801d1Pgn9ncZBafW9EzjZC2xvZByUajH6bNXzUzrHTIMlu6PwAuIArimTK8ZCF7smNjg3hQpEUDzegZDZD"
          },
          "matchingColumns": [
            "messaging",
            "messaging_firstItem"
          ],
          "schema": [
            {
              "id": "supabase_clients_url",
              "displayName": "supabase_clients_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "ig_user_token",
              "displayName": "ig_user_token",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        368,
        1072
      ],
      "name": "Supabase",
      "id": "3174dbcb-3484-4328-9d9a-3c3b5baee41c"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1408,
        1200
      ],
      "id": "e7577ef4-dcb0-4ebc-9843-31cf67d2b1a3",
      "name": "Merge1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "aQ7Tf4TGBCi7kcf0",
          "mode": "list",
          "cachedResultName": "HandleMessageStack"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "wait_seconds": 60,
            "upstash_base_url": "https://intent-guinea-6714.upstash.io",
            "client_id": "={{ $json.fromID }}",
            "message": "={{ $json.message }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "upstash_base_url",
              "displayName": "upstash_base_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "wait_seconds",
              "displayName": "wait_seconds",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "message",
              "displayName": "message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        1184,
        1344
      ],
      "id": "616201cb-3add-4693-9cb4-e6845c5f587a",
      "name": "HandleMessageStack"
    },
    {
      "parameters": {
        "chatId": "-1003481815942",
        "text": "={{ $json.user_name }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3344,
        752
      ],
      "id": "9eb30cfc-27d6-41cb-89f4-445970659ef7",
      "name": "TEST",
      "webhookId": "aa6f3dc3-68af-4d01-bdcd-cd1ee7777413",
      "credentials": {
        "telegramApi": {
          "id": "RjFhbLnDMoH8VW2V",
          "name": "AI Manager Bot"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.fromID }}",
        "tableName": "serhii_consulting_chat_histories",
        "contextWindowLength": 25
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        1744,
        1568
      ],
      "id": "69311a8d-deef-473b-b035-f651f1882974",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "dbUvQyOOeDxRzHfe",
          "name": "ClientRecords"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {
          "responseFormat": "json_object"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1616,
        1568
      ],
      "id": "6e4e978d-e10a-41a0-a60b-e65008a9fb39",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "kxH60aJwWWGZzBaI",
          "name": "Gosha GPT Key"
        }
      }
    },
    {
      "parameters": {
        "path": "2a4747cd-5987-46ed-ae77-03b7672534a4",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -736,
        1552
      ],
      "id": "eead8f15-215a-4f5a-bee7-790118dd4993",
      "name": "GET",
      "webhookId": "2a4747cd-5987-46ed-ae77-03b7672534a4",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "return [\n  {\n    json: {\n      user_name: 'Alice Johnson',\n      client_username: '@mint_comet',\n      user_phone: '+1 234 567 890',\n      user_preferred_date: '2025-11-08',\n      transfer_reason: 'Asked to be contacted directly by a manager.'\n    }\n  }\n]\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3184,
        752
      ],
      "id": "d4f51577-1862-49e9-8884-88c3f31ad953",
      "name": "TEST JSON"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "3c75fb1a-48e5-4267-9c22-c4a169f79da0",
              "name": "mid",
              "value": "={{ $json.messaging[0].message.mid }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -592,
        864
      ],
      "id": "f4281ce4-6b8b-49b3-99b8-60ad4d3c37e9",
      "name": "mid"
    },
    {
      "parameters": {
        "url": "=https://intent-guinea-6714.upstash.io/get/${{ $json.mid }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -432,
        864
      ],
      "id": "caa491d5-fd7a-43c6-9e21-ad4b98298902",
      "name": "HTTP Request",
      "credentials": {
        "httpHeaderAuth": {
          "id": "BfV7pnbm9L2uaLya",
          "name": "Upstash Account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0f27a492-2ec4-4dff-b0c3-ec905740c42f",
              "leftValue": "={{ $json.result }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -224,
        864
      ],
      "id": "83a5c26a-0f11-416b-8128-49d3baa41449",
      "name": "Duplicate?"
    },
    {
      "parameters": {
        "jsCode": "return []"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -32,
        752
      ],
      "id": "b931583a-6910-4c26-8e38-962bb7ae0aa8",
      "name": "Stop"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://intent-guinea-6714.upstash.io/setex/${{ $('mid').first().json.mid }}/300/1",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -16,
        960
      ],
      "id": "cc1f8c66-4666-4c86-a633-a5b59c7711e6",
      "name": "HTTP Request1",
      "credentials": {
        "httpHeaderAuth": {
          "id": "BfV7pnbm9L2uaLya",
          "name": "Upstash Account"
        }
      }
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        144,
        1232
      ],
      "id": "b0103e85-3cf5-4819-b50a-78a1a1439205",
      "name": "Merge3"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Ü–µ–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç add_qualified_lead –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –∑—ñ–±—Ä–∞–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–æ —Ç–∞–±–ª–∏—Ü—ñ.",
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Xnqp9v968cu5FyFkRIBOmS-uSej6-zZ_BmTJ6I4rOZI",
          "mode": "list",
          "cachedResultName": "serhii_danchyshyn",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Xnqp9v968cu5FyFkRIBOmS-uSej6-zZ_BmTJ6I4rOZI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "leads",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Xnqp9v968cu5FyFkRIBOmS-uSej6-zZ_BmTJ6I4rOZI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "business": "={{ $fromAI('business', '–ù—ñ—à–∞ –±—ñ–∑–Ω–µ—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ \"–ü—Ä–æ–¥–∞–∂ –æ–¥—è–≥—É –≤ —ñ–Ω—Å—Ç–∞–≥—Ä–∞–º—ñ\"') }}",
            "recommended_product": "={{ $fromAI('recommended_product', '–ü–æ—Å–ª—É–≥—É, —è–∫—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—à –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ; –¥–æ $5k —â–æ–º—ñ—Å—è—á–Ω–æ–≥–æ –æ–±–æ—Ä–æ—Ç—É - –º–µ–Ω—Ç–æ—Ä–∫–∞, –¥–æ $10k - –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Ç–∞ –ø—Ä–æ–¥–∞–∂—ñ, –±—ñ–ª—å—à–µ $10k - —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó') }}\n",
            "goals": "={{ $fromAI('goals', '–ó–∞–¥–∞—á—ñ –±—ñ–∑–Ω–µ—Å—É, —è–∫—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏') }}\n",
            "team": "={{ $fromAI('team', '–î–µ—Ç–∞–ª—ñ —â–æ–¥–æ –∫–æ–º–∞–Ω–¥–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ \"–Ñ –º–µ–Ω–µ–¥–∂–µ—Ä —Ç–∞ —Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥, –Ω–µ –ø–ª–∞–Ω—É—î –Ω–∞–π–º–∞—Ç–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º\"') }}\n",
            "monthly_turnover": "={{ $fromAI('monthly_turnover', '–©–æ–º—ñ—Å—è—á–Ω–∏–π –æ–±–æ—Ä–æ—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É –¥–æ–ª–∞—Ä–∞—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ \\\"5200$\\\"') }}",
            "user_chat_link": "={{ $('Merge1').first().json.client_username }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "business",
              "displayName": "business",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "monthly_turnover",
              "displayName": "monthly_turnover",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "team",
              "displayName": "team",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "goals",
              "displayName": "goals",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "recommended_product",
              "displayName": "recommended_product",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "user_chat_link",
              "displayName": "user_chat_link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        1904,
        1568
      ],
      "id": "162d2dda-8def-49f2-82d2-01d491020501",
      "name": "add_qualified_lead",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "KqPn7LBjWDfqBdFz",
          "name": "Google Sheets OG"
        }
      }
    },
    {
      "parameters": {
        "content": "## TODO: –ø–æ–º–µ–Ω—è—Ç—å –∞–π–¥–∏\n–Ω–∞ —Å–µ—Ä–≥–µ—è\n\n### –ø—Ä–æ–≤–µ—Ä–∏—Ç—å\n—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ 17841401285847074",
        "height": 288,
        "width": 368,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -864,
        1104
      ],
      "typeVersion": 1,
      "id": "44601cb4-c0b0-4537-a573-5617a2351954",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        1104,
        1552
      ],
      "id": "95a803e0-75da-4868-b035-3024d8ae5f28",
      "name": "When chat message received",
      "webhookId": "32be11cd-5f35-4c9c-9d94-16441da6d397"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2be36290-e90b-4e51-866f-a4ac2d6ccbea",
              "name": "message",
              "value": "={{ $json.chatInput }}",
              "type": "string"
            },
            {
              "id": "8d4da2a2-1438-4ae3-a51f-fc18480e070b",
              "name": "fromID",
              "value": "=test_{{ $json.sessionId }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1264,
        1552
      ],
      "id": "6f3e5312-cb6c-471d-95a5-20244298aa10",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "jsCode": "function escapeMarkdownV2(text) {\n  return text.replace(/([_*\\[\\]()~`>#+\\-=|{}.!])/g, '\\\\$1')\n}\n\nreturn items.map(item => {\n  const data = item.json\n  const lines = []\n\n  // --- CONTACT INFO (Usually passed from Trigger) ---\n  \n  if (data.client_username && data.client_username !== 'unknown') {\n    const username = data.client_username.replace(/^@/, ''); \n    const profileUrl = `https://instagram.com/${username}`\n    // Creates a clickable link in Telegram Markdown\n    lines.push(`üì± Instagram: [@${username}](${profileUrl})`)\n  }\n\n  // --- QUALIFICATION DATA (From AI Agent) ---\n\n  // Niche \n  if (data.business && data.business !== 'unknown')\n    lines.push(`üè¢ Business: ${data.business}`)\n\n  // Turnover \n  if (data.monthly_turnover && data.monthly_turnover !== 'unknown')\n    lines.push(`üí∞ Turnover: ${data.monthly_turnover}`)\n\n  // Team details \n  if (data.team && data.team !== 'unknown')\n    lines.push(`üë• Team: ${data.team}`)\n\n  // Goals/Problems \n  if (data.goals && data.goals !== 'unknown')\n    lines.push(`üéØ Goals: ${data.goals}`)\n\n  // Recommended Product [cite: 14, 15]\n  if (data.recommended_product && data.recommended_product !== 'unknown')\n    lines.push(`üì¶ Recommended: ${data.recommended_product}`)\n\n  // --- TRANSFER LOGIC ---\n\n  // Reason for transfer [cite: 11]\n  if (data.transfer_reason && data.transfer_reason.trim())\n    lines.push(`\\n‚ö†Ô∏è Transfer reason: ${data.transfer_reason}`)\n\n  return {\n    json: {\n      message: lines.join('\\n')\n    }\n  }\n})"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2384,
        1440
      ],
      "id": "9fa220ab-7e81-42fc-add9-dcbd5856ef75",
      "name": "Handoff Message1"
    },
    {
      "parameters": {
        "chatId": "-1003481815942",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2608,
        1440
      ],
      "id": "fea33a29-8dae-4a6e-b343-e66a59de2471",
      "name": "Send Message To Group2",
      "webhookId": "f50e57c1-2a67-4633-9b22-23bb30619d99",
      "credentials": {
        "telegramApi": {
          "id": "RjFhbLnDMoH8VW2V",
          "name": "AI Manager Bot"
        }
      }
    },
    {
      "parameters": {
        "content": "## serhii Instagram Token\n```\nEAAV8UjEiN4QBP3mAmQFoZArZAtXBkTKHh0fb5IpR6X9qVvVEoEspr5oIhjvMEHSgjcxV8DZB50ZBRoZAFBhUwIMhho0FLB58K08AQmgP9eAlPzidMClW75RQpyUkoGdSg801d1Pgn9ncZBafW9EzjZC2xvZByUajH6bNXzUzrHTIMlu6PwAuIArimTK8ZCF7smNjg3hQpEUDzegZDZD\n```",
        "height": 256,
        "width": 416,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1680,
        848
      ],
      "typeVersion": 1,
      "id": "75ed7b46-80b3-4eab-a566-971cab16bd31",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "serhii_consulting.ig"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1632,
        1264
      ],
      "typeVersion": 1,
      "id": "fce3d3ba-77a6-4a25-80e7-57ad0fe9d5a0",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "dataToSave": {
          "values": [
            {
              "key": "event",
              "value": "ANSWERED_TO_CLIENT"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executionData",
      "typeVersion": 1.1,
      "position": [
        2992,
        1216
      ],
      "id": "7c3982db-8958-4d09-a031-118f4681ef58",
      "name": "[LOG] Event ANSWERED_TO_CLIENT"
    },
    {
      "parameters": {
        "dataToSave": {
          "values": [
            {
              "key": "event",
              "value": "TRANSFERED_CLIENT"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executionData",
      "typeVersion": 1.1,
      "position": [
        3392,
        960
      ],
      "id": "9b564a82-08a9-4c28-aac0-1d1a089389d1",
      "name": "[LOG] Event TRANSFERED_CLIENT"
    }
  ],
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "n8n.orbitalgarden.space",
            "user-agent": "facebookexternalua",
            "content-length": "485",
            "accept": "*/*",
            "accept-encoding": "deflate, gzip",
            "content-type": "application/json",
            "facebook-api-version": "v24.0",
            "via": "1.1 Caddy",
            "x-forwarded-for": "173.252.79.2",
            "x-forwarded-host": "n8n.orbitalgarden.space",
            "x-forwarded-proto": "https",
            "x-hub-signature": "sha1=5629ef3a79136bf609ebf84cd279bddb6546fcde",
            "x-hub-signature-256": "sha256=80659fc7d6c847636e5ed533c07c22db0a75928296a5b087012499864ba83f0b"
          },
          "params": {},
          "query": {},
          "body": {
            "object": "instagram",
            "entry": [
              {
                "time": 1761203780377,
                "id": "17841456702884465",
                "messaging": [
                  {
                    "sender": {
                      "id": "1179247697399594"
                    },
                    "recipient": {
                      "id": "17841456702884465"
                    },
                    "timestamp": 1761203779511,
                    "message": {
                      "mid": "aWdfZAG1faXRlbToxOklHTWVzc2FnZAUlEOjE3ODQxNDU2NzAyODg0NDY1OjM0MDI4MjM2Njg0MTcxMDMwMTI0NDI1OTk5ODc3MjU5Mjc3OTYxMTozMjQ4ODQ3NTM4MjMwNDU4NDc0NjUzMzAwMDcwMDc1NTk2OAZDZD",
                      "text": "–ú–æ–∂–µ—Ç –∑–∞–≤—Ç—Ä–∞ –≤ 9 –≤–µ—á–µ—Ä–∞?"
                    }
                  }
                ]
              }
            ]
          },
          "webhookUrl": "https://n8n.orbitalgarden.space/webhook/wowlaser.ig",
          "executionMode": "production"
        }
      }
    ]
  },
  "connections": {
    "AI Agent": {
      "main": [
        [
          {
            "node": "Parse to JSON1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Source": {
      "main": [
        [
          {
            "node": "Message Data1",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Data": {
      "main": [
        [
          {
            "node": "Valid?1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "Source",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Valid?1": {
      "main": [
        [
          {
            "node": "mid",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge3",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Should answer?1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Transfer?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message Data1": {
      "main": [
        [
          {
            "node": "HandleMessageStack",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse to JSON1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Should answer?1": {
      "main": [
        [
          {
            "node": "Send Message Reply1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transfer?": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          },
          {
            "node": "Upsert Clients",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Handoff Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET IG User": {
      "main": [
        []
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Handoff Message": {
      "main": [
        [
          {
            "node": "Send Message To Group",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HandleMessageStack": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          },
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GET": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TEST JSON": {
      "main": [
        [
          {
            "node": "TEST",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "mid": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Duplicate?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Duplicate?": {
      "main": [
        [
          {
            "node": "Stop",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge3": {
      "main": [
        [
          {
            "node": "Supabase",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "add_qualified_lead": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Handoff Message1": {
      "main": [
        [
          {
            "node": "Send Message To Group2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Message Reply1": {
      "main": [
        [
          {
            "node": "[LOG] Event ANSWERED_TO_CLIENT",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Message To Group": {
      "main": [
        [
          {
            "node": "[LOG] Event TRANSFERED_CLIENT",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timezone": "America/New_York",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "6fbe3775-cc5b-4999-8378-5382be05e64e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "c9e53a150db3979558dce85b88732650eafd440e09b4690afc30683da1136ad9"
  },
  "id": "QO4WrknNhQfxim1x",
  "tags": [
    {
      "createdAt": "2025-10-29T17:09:52.649Z",
      "updatedAt": "2025-10-29T17:09:52.649Z",
      "id": "hcmv4AsIBvrEdV4f",
      "name": "INSTA"
    },
    {
      "createdAt": "2025-09-14T12:25:31.358Z",
      "updatedAt": "2025-09-14T12:25:31.358Z",
      "id": "oi3mfeDHd8seIZYf",
      "name": "latest"
    }
  ]
}